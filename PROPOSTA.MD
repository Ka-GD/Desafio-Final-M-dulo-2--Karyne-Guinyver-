# üìå Plano de Seguran√ßa - LojaZeta

Este documento descreve o plano de seguran√ßa da LojaZeta, visando reduzir riscos cr√≠ticos, implementar defesa em camadas, centralizar monitoramento e estruturar resposta a incidentes seguindo o NIST.

---

## 1. Sum√°rio Executivo
A LojaZeta, e-commerce em crescimento, enfrenta riscos como SQLi, XSS e brute-force em `/login`.  
O ambiente carece de SIEM consolidado, centraliza√ß√£o de logs e testes de backup.  
Equipe enxuta (2 devs + 1 ops) exige estrat√©gia simples, escal√°vel e de baixo custo.  
**Objetivo:** reduzir riscos cr√≠ticos com defesa em camadas, monitoramento centralizado e IR baseado no NIST.

---

## 2. Escopo e Metodologia
**Escopo:** seguran√ßa web/app, identidade, dados cr√≠ticos, monitoramento centralizado, runbooks b√°sicos.  
**Fora do escopo:** SOC 24/7, Red Team avan√ßado, SIEM corporativo completo.  
**Metodologia:** an√°lise do stack (Nginx, Node.js, PostgreSQL), boas pr√°ticas Blue Team, seguran√ßa em camadas e ciclo NIST IR.  
**Assun√ß√µes:** IaaS flex√≠vel, equipe com conhecimento Linux b√°sico.

---

## 3. Arquitetura de Defesa

A arquitetura de defesa da LojaZeta integra **Per√≠metro, Rede, Aplica√ß√£o e Monitoramento** em um fluxo visual limpo.

```mermaid
flowchart TD
    Internet([üåê Internet])
    WAF[üîí WAF/CRS<br/>Prote√ß√£o Per√≠metro]
    LB[‚öôÔ∏è Load Balancer<br/>Distribui√ß√£o de tr√°fego]
    APP[üíª App Node.js<br/>L√≥gica da Aplica√ß√£o]
    DB[(üóÑÔ∏è PostgreSQL<br/>Banco de Dados)]
    LOGS[üìä Logs Centralizados<br/>Loki + Grafana]
    IAM[üõ°Ô∏è Gest√£o de Identidade<br/>Vault / Secret Manager]

    Internet --> WAF
    WAF --> LB
    LB --> APP
    APP --> DB
    APP --> LOGS
    DB --> LOGS
    IAM --> APP

    classDef perimeter fill:#1f2b45,stroke:#0a1a2b,stroke-width:2px,color:#ffffff;
    classDef core fill:#3b4b63,stroke:#1f2b45,stroke-width:2px,color:#ffffff;
    classDef monitoring fill:#6c7a95,stroke:#3b4b63,stroke-width:2px,color:#ffffff;

    class WAF,LB,IAM perimeter;
    class APP,DB core;
    class LOGS monitoring;
---

## 4. Monitoramento & SIEM

A solu√ß√£o monitora todo o stack para detectar incidentes em tempo real.

Logs: Nginx, Node.js, PostgreSQL, OS, WAF ‚Üí Loki + Grafana.

Alertas: falhas de login, ataques WAF, erros cr√≠ticos, falhas de backup.

KPIs: MTTD, MTTR, ataques bloqueados, % de logs integrados.
---

## 5. Resposta a Incidentes

Fluxo padr√£o: Detec√ß√£o ‚Üí Conten√ß√£o ‚Üí Erradica√ß√£o ‚Üí Recupera√ß√£o ‚Üí Li√ß√µes Aprendidas.
Runbooks m√≠nimos: SQLi, XSS, brute-force e indisponibilidade.

---

## 6. Recomenda√ß√µes (80/20)

30 dias: implementar WAF + rate limit, centralizar logs, testar backups, criar runbooks.

90 dias: MFA dev/ops, hardening automatizado, dashboards, playbooks expandidos.

180 dias: gest√£o de segredos, WAF customizado, treinamento em IR.

Respons√°veis:

Devs ‚Üí c√≥digo seguro, ORM, MFA.

Ops ‚Üí hardening, logs, backup.

Consultoria ‚Üí SIEM, runbooks.

---

## 7. Riscos, Custos e Assun√ß√µes

Riscos: equipe pequena, or√ßamento restrito.

Custos: open-source (Loki/Grafana, Fail2ban), Cloudflare WAF (~$20/m√™s).

Assun√ß√µes: IaaS suporta logs/regras; time com acesso root/admin e Linux b√°sico.

---

## 8. Conclus√£o

Ado√ß√£o do plano = mais resili√™ncia, visibilidade e resposta r√°pida.

Pr√≥ximos Passos: validar escopo, aplicar quick wins, rodar testes IR.

Crit√©rios de Sucesso:

Menos incidentes cr√≠ticos.

100% cobertura de logs.

MTTR < 4h.

Runbooks executados com sucesso.
